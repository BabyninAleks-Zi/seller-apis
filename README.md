# Синхронизация товаров между поставщиком и маркетплейсами

Эта программа предназначена для автоматической синхронизации остатков и цен товаров 
между поставщиком часов Casio и двумя маркетплейсами:
* Яндекс.Маркет
* Ozon

Программа автоматически:
- Скачивает актуальные остатки товаров с сайта поставщика
- Получает список товаров на маркетплейсах
- Обновляет остатки и цены в соответствии с данными поставщика
- Обрабатывает товары частями

Программа состоит из двух скриптов, каждый из которых выполняет свою конкретную задачу.

```Python
market.py        # Скрипт обновляет данные на Яндекс.Маркет
seller.py        # Скрипт обновляет данные на Ozon
```

***

## Как установить

Прежде чем начать работу с репозиторием необходимо установить библиотеки 
из файла `requirements.txt`.

Для установки необходимых библеотек использующихся в репозитории, в консоли 
напишите команду и дождитесь установки всех необходимых для работы репозитория 
библиотек:

```
$ pip install -r requirements.txt
```

Документацию к библиотекам `environs`, `pandas`, `requests` можете изучить на сайте 
[PyPI](https://pypi.org/).

***

## Как использовать

### 1. Настройте переменные окружения

Создайте файл .env в корневой директории проекта со следующими переменными:

Для Яндекс.Маркет:

```Python
MARKET_TOKEN=           # Ваш API ключ Яндекс.Маркет
FBS_ID=                 # Идентификатор_кампании_FBS
DBS_ID=                 # Идентификатор_кампании_DBS
WAREHOUSE_FBS_ID=       # Идентификатор_склада_FBS
WAREHOUSE_DBS_ID=       # Идентификатор_склада_DBS

```

Для Ozon:

```Python
SELLER_TOKEN=           # Ваш API ключ Ozon
CLIENT_ID=              # Ваш client id Ozon
```

### 2. Как запустить программу:

Для обновления товаров на Яндекс.Маркет:

```
python market.py
```
Для обновления товаров на Ozon:

```
python seller.py
```
### 3. Что делает программа:

* Работа с Яндекс.Маркет:

    ```Python
    get_product_list() - получает список товаров из Яндекс.Маркет
    
    get_offer_ids() - извлекает артикулы товаров
    
    create_stocks() - формирует данные об остатках для FBS и DBS кампаний
    
    create_prices() - формирует данные о ценах
    
    update_stocks() - обновляет остатки на Яндекс.Маркет
    
    update_price() - обновляет цены на Яндекс.Маркет
    ```
* Работа с Ozon:

```Python
    download_stock() - скачивает архив с остатками с сайта Casio и извлекает Excel-файл
    
    get_offer_ids() - получает список всех товаров на Ozon
    
    create_stocks() - формирует список остатков для обновления
    
    create_prices() - формирует список цен для обновления
    
    update_stocks() - отправляет обновленные остатки на Ozon
    
    update_price() - отправляет обновленные цены на Ozon
```

Программа так же включает обработку основных ошибок.
